ifdef::context[:parent-context: {context}]
[id="spring_{context}"]
= Externalizing Sessions Using Spring Session
:context: spring

link:http://docs.spring.io/spring-session/docs/current/reference/html5[Spring Session] lets you externalize user session information into {brandname}.

To configure Spring Session integration in your application, do the following:

[arabic]
. Add dependencies to your `pom.xml`.
* Embedded mode: `infinispan-spring5-embedded`
* Remote client-server mode: `infinispan-spring5-remote`
+
The following is an example with remote client-server mode:
+
[source,xml,subs="attributes+",nowrap-option=""]
----
link:dependencies_maven/spring5_session_dependencies.xml[]
----
. Specify the appropriate FactoryBean to expose a `CacheManager` instance.
* Embedded mode: `SpringEmbeddedCacheManagerFactoryBean`
* Remote client-server mode: `SpringRemoteCacheManagerFactoryBean`
. Enable Spring Session with the appropriate annotation.
* Embedded mode: `@EnableInfinispanEmbeddedHttpSession`
* Remote client-server mode: `@EnableInfinispanRemoteHttpSession`
+
These annotations have optional parameters:
- `maxInactiveIntervalInSeconds` sets session expiration time in seconds. The default is `1800`.
- `cacheName` specifies the name of the cache that stores sessions. The default is `sessions`.

The following example shows a complete, annotation-based configuration:

[source,java,nowrap-option=""]
----
link:code_examples/SpringExternalizeSessions.java[]
----


ifdef::parent-context[:context: {parent-context}]
ifndef::parent-context[:!context:]